<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Destructuring Example</title>
</head>
<body>
    <h1>Destructuring in JavaScript</h1>
    <div id="output"></div>

    <script>
        // 1. Menggunakan destructuring pada parameter object
        const calculateAge = birthYear => 2019 - birthYear;

        const yearUntilRetirement = ({ year, firstName }) => {
            const age = calculateAge(year);
            const retirement = 60 - age;

            const result = retirement > 0 
                ? `${firstName} retires in ${retirement} years`
                : `${firstName} is already retired.`;

            document.getElementById('output').innerHTML += `<p>${result}</p>`;
        }

        yearUntilRetirement({ year: 1987, firstName: 'John' });

        // --------------------------------------------

        // 2. Menggunakan rest operator untuk menangkap sisa parameter
        const addNumber = (...numbers) => numbers.reduce((sum, num) => sum + num, 0);

        document.getElementById('output').innerHTML += `<p>Sum: ${addNumber(1, 2, 3, 4, 5, 6, 7)}</p>`;

        // --------------------------------------------

        // 3. Menggunakan destructuring dengan default value pada object
        const phi = 3.14;
        let radius = 0;

        const calculateArea = ({ radius, power = 2 }) => phi * Math.pow(radius, power);

        radius = 21;
        const area21 = calculateArea({ radius });

        radius = 7;
        const area7 = calculateArea({ radius });

        document.getElementById('output').innerHTML += `<p>Area with 21 radius: ${area21}, and area with 7 radius: ${area7}</p>`;

        // --------------------------------------------

        // 4. Menggunakan default value pada parameter method
        const makeAjaxRequest = (url, method = 'GET') => {
            document.getElementById('output').innerHTML += `<p>URL: ${url}, Method: ${method}</p>`;
        }

        makeAjaxRequest('www.google.com');  // Output: www.google.com GET

        // --------------------------------------------
        // Destructuring pada Array dan Object
        // --------------------------------------------

        // 5. Destructuring Array
        const fruits = ['Apple', 'Banana', 'Orange'];
        const [firstFruit, secondFruit] = fruits;

        document.getElementById('output').innerHTML += `<p>First Fruit: ${firstFruit}, Second Fruit: ${secondFruit}</p>`;

        // 6. Destructuring Object
        const person = { name: 'John', age: 30 };
        const { name, age } = person;

        document.getElementById('output').innerHTML += `<p>Name: ${name}, Age: ${age}</p>`;

        // 7. Destructuring dengan Default Value pada Array
        const [a = 5, b = 7] = [1];
        document.getElementById('output').innerHTML += `<p>First: ${a}, Second: ${b}</p>`;

        // 8. Destructuring dengan Default Value pada Object
        const { userName = 'Anonymous', userAge = 18 } = { userAge: 20 };
        document.getElementById('output').innerHTML += `<p>Username: ${userName}, Age: ${userAge}</p>`;

        // 9. Destructuring dengan Rest Operator pada Array
        const [firstNum, ...restNums] = [10, 20, 30, 40];
        document.getElementById('output').innerHTML += `<p>First Num: ${firstNum}, Rest: ${restNums}</p>`;

        // 10. Destructuring dengan Rest Operator pada Object
        const { cityName, ...otherDetails } = { cityName: 'New York', country: 'USA', population: 8000000 };
        document.getElementById('output').innerHTML += `<p>City: ${cityName}, Other: ${JSON.stringify(otherDetails)}</p>`;
    </script>
</body>
</html>
